<!-- memberships new user form from school show view -->
<%= form_with(model: [@school, Membership.new], id: :new_membership, class: :new_membership) do |f| %>
  <div class="errors"></div>
  <div class="row">
    <div class="school-collection-select">
      <div class="form-group">
        <%= f.collection_select :school_id, School.where(id: @school), :id, :name, { }, {class: "form-control", readonly: "readonly"} %>
        <!-- ensure that the current school is selected for current_user by using where(id: school) -->
      </div>
    </div>
    <div class="col-sm-4">
      <div class="form-group">
        <%= f.text_field :user_name, data: { autocomplete_source: user_members_path },
          placeholder: "Name of Person", class: "string required form-control", id: "membership_user_name" %>
          <small id="userNameHelp" class="form-text text-info">Name of person to add.</small>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="form-group">
        <%# if current_user.has_role?(:admin) %>
        <% Membership.members.keys.map do |member| %>
          <label class="custom-control custom-radio">
            <%= f.radio_button :member, member, class: "custom-control-input" %>
            <span class="custom-control-indicator"></span>
            <span class="custom-control-description"><%= member.humanize %></span>
          </label>
        <% end %>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="actions">
        <%= f.submit "Save details", class: "btn btn-sm btn-outline-primary" %>
      </div>
    </div>
  </div>
<% end %>
